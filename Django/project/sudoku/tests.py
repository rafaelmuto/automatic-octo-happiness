from django.test import TestCase
from django.contrib.auth.models import User
from .models import Sudoku

# python manage.py test sudoku.tests.SudokuModelTest
class SudokuModelTest(TestCase):
    """Unit tests for the Sudoku model"""
    
    def setUp(self):
        """Set up test data before each test method"""
        self.user = User.objects.create_user(
            username='testuser',
            email='test@example.com',
            password='testpass123'
        )
            
    def test_is_valid_string(self):

        valid_strings = [
            '007040000305006007920790010030020074000090000570060090010059068600800103000030200',
            '020456789457080236689237040005362974274090653396574800040618397761040528938725060',
            '020406009407080236080207040000002070004000650390500000000608097761040528030725060',
            '907010040082004007140730000000407003070000020200509000000043098700600130090070602',
            '600700000080064005005018000204073508060849030708520401000480300100350070000007002',
            '007040000305006007920790010030020074000090000570060090010059068600800103000030200',
            '000000000000000000000000000000000000000000000000000000000000000000000000000000000'
        ]

        for valid_string in valid_strings:
            self.assertTrue(Sudoku._is_valid_string(valid_string))
        
        invalid_strings = [
            '0000000000000000000000000000000000000000000000000000000000000000000000000000000000',
            '000000000000000000000000000000000000000000000000000000000000000000000000000000000A'
            '00000000000000000000000000000000000000000000000000000000000000000000000000000000'
        ]

        for invalid_string in invalid_strings:
            self.assertFalse(Sudoku._is_valid_string(invalid_string))
            
    # def test_is_valid_grid(self):

    def test_gridify_string_and_stringify_grid(self):

        strings = [
            '007040000305006007920790010030020074000090000570060090010059068600800103000030200',
            '020456789457080236689237040005362974274090653396574800040618397761040528938725060',
            '020406009407080236080207040000002070004000650390500000000608097761040528030725060',
            '907010040082004007140730000000407003070000020200509000000043098700600130090070602',
            '600700000080064005005018000204073508060849030708520401000480300100350070000007002',
            '007040000305006007920790010030020074000090000570060090010059068600800103000030200',
            '000000000000000000000000000000000000000000000000000000000000000000000000000000000'
        ]

        for string in strings:
            gridified_value = Sudoku._gridify_string(string)
            stringified_value = Sudoku._stringify_grid(gridified_value)

            self.assertEqual(string, stringified_value)
            self.assertEqual(gridified_value, Sudoku._gridify_string(stringified_value))

